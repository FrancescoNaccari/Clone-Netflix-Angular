<div class="hero-section" *ngIf="featuredMovie"> 
  <img
    [src]="'https://image.tmdb.org/t/p/w1280' + featuredMovie.poster_path"
    [alt]="featuredMovie.title"
    class="hero-img"
  />
  <div class="hero-content">
    <h1>{{ featuredMovie.title }}</h1>
    <p>{{ featuredMovie.overview }}</p>
    <button class="btn play-now">
      <i class="fas fa-play"></i> Guarda Ora
    </button>
    <button class="btn more-info">
      <i class="fas fa-info-circle"></i> Altre Info
    </button>
  </div>
</div>

<div class="carousel-section ms-3 p-5" *ngIf="movieCategories.length > 0">
  <div *ngFor="let category of movieCategories">
    <h2 class="category-title">{{ category.name }}</h2>

    <carousel [itemsPerSlide]="6" [interval]="0" [noWrap]="false" [startFromIndex]="0">
      <ng-container *ngFor="let movie of category.movies">
        <slide>
          <div class="movie-item" *ngIf="movie.poster_path; else noMovie" (click)="openModal(movie)">
            <div class="poster-container">
              <img
                [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
                [alt]="movie.title"
                class="poster-img"
              />
            </div>
          </div>
          <ng-template #noMovie>
            <div class="movie-item">
              <div class="poster-container">
                <p class="text-white">Non disponibile</p>
              </div>
            </div>
          </ng-template>
        </slide>
      </ng-container>
    </carousel>
  </div>
</div>

<!-- Modale -->
<ng-template #movieModal>
  <div class="modal-header">
    <h4 class="modal-title text-white">{{ selectedMovie?.title }}</h4>
  </div>
<div class="modal-body">
  <div *ngIf="selectedMovie?.trailerUrl; else noTrailer">
    <iframe
      [src]="selectedMovie?.trailerUrl"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    ></iframe>
  </div>
  <ng-template #noTrailer>
    <p class="text-white">Trailer non disponibile per questo film.</p>
  </ng-template>
  <div class="movie-info-overlay mt-3">
    <p>{{ selectedMovie?.overview || 'Descrizione non disponibile.' }}</p>
    <p><strong>Generi:</strong> {{ selectedMovie?.genres || 'Generi non disponibili.' }}</p>
  </div>
</div>


</ng-template>
